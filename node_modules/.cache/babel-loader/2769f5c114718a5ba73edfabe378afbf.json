{"ast":null,"code":"import { Contract, WalletConnection, connect, keyStores } from 'near-api-js';\nimport environment from './config';\nimport { formatNearAmount } from 'near-api-js/lib/utils/format';\nconst nearEnv = environment('testnet');\nexport async function initializeContract() {\n  // We create a near object that we will use to interact with the NEAR network.\n  // It holds a keyStore object that stores the wallet information\n  // which is stored in the browser's local storage.\n  const near = await connect(Object.assign({\n    deps: {\n      keyStore: new keyStores.BrowserLocalStorageKeyStore()\n    }\n  }, nearEnv)); // Then we create a WalletConnection object that we will use to interact with the wallet.\n  // To sign in, sign out, get the account ID, and get the account balance.\n\n  window.walletConnection = new WalletConnection(near);\n  window.accountId = window.walletConnection.getAccountId(); // We create a Contract object that we will use to interact with the smart contract.\n  // We pass the account, the name of the smart contract,\n  // and the methods that we want to use to the constructor.\n\n  window.contract = new Contract(window.walletConnection.account(), nearEnv.contractName, {\n    viewMethods: [\"getusers\"],\n    changeMethods: [\"verifyAccount\", \"createProfile\", \"isAccountVerified\"]\n  });\n}\nexport async function accountBalance() {\n  return formatNearAmount((await window.walletConnection.account().getAccountBalance()).total, 2);\n}\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}","map":{"version":3,"names":["Contract","WalletConnection","connect","keyStores","environment","formatNearAmount","nearEnv","initializeContract","near","Object","assign","deps","keyStore","BrowserLocalStorageKeyStore","window","walletConnection","accountId","getAccountId","contract","account","contractName","viewMethods","changeMethods","accountBalance","getAccountBalance","total","login","requestSignIn","logout","signOut","location","reload"],"sources":["D:/Projects/verifiedprofilev2/src/components/utils/near.js"],"sourcesContent":["import { Contract, WalletConnection, connect, keyStores } from 'near-api-js';\n\nimport environment from './config';\nimport { formatNearAmount } from 'near-api-js/lib/utils/format';\n\nconst nearEnv = environment('testnet');\n\nexport async function initializeContract() {\n  // We create a near object that we will use to interact with the NEAR network.\n  // It holds a keyStore object that stores the wallet information\n  // which is stored in the browser's local storage.\n\n  const near = await connect(\n    Object.assign(\n      { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } },\n      nearEnv\n    )\n  );\n\n  // Then we create a WalletConnection object that we will use to interact with the wallet.\n  // To sign in, sign out, get the account ID, and get the account balance.\n\n  window.walletConnection = new WalletConnection(near);\n  window.accountId = window.walletConnection.getAccountId();\n\n  // We create a Contract object that we will use to interact with the smart contract.\n  // We pass the account, the name of the smart contract,\n  // and the methods that we want to use to the constructor.\n\n  window.contract = new Contract(\n    window.walletConnection.account(),\n    nearEnv.contractName,\n    {\n      viewMethods: [ \"getusers\"],\n      changeMethods: [\"verifyAccount\", \"createProfile\",\"isAccountVerified\"],\n    }\n  );\n}\n\nexport async function accountBalance() {\n  return formatNearAmount(\n    (await window.walletConnection.account().getAccountBalance()).total,\n    2\n  );\n}\n\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\n\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}\n"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,gBAAnB,EAAqCC,OAArC,EAA8CC,SAA9C,QAA+D,aAA/D;AAEA,OAAOC,WAAP,MAAwB,UAAxB;AACA,SAASC,gBAAT,QAAiC,8BAAjC;AAEA,MAAMC,OAAO,GAAGF,WAAW,CAAC,SAAD,CAA3B;AAEA,OAAO,eAAeG,kBAAf,GAAoC;EACzC;EACA;EACA;EAEA,MAAMC,IAAI,GAAG,MAAMN,OAAO,CACxBO,MAAM,CAACC,MAAP,CACE;IAAEC,IAAI,EAAE;MAAEC,QAAQ,EAAE,IAAIT,SAAS,CAACU,2BAAd;IAAZ;EAAR,CADF,EAEEP,OAFF,CADwB,CAA1B,CALyC,CAYzC;EACA;;EAEAQ,MAAM,CAACC,gBAAP,GAA0B,IAAId,gBAAJ,CAAqBO,IAArB,CAA1B;EACAM,MAAM,CAACE,SAAP,GAAmBF,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAnB,CAhByC,CAkBzC;EACA;EACA;;EAEAH,MAAM,CAACI,QAAP,GAAkB,IAAIlB,QAAJ,CAChBc,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,EADgB,EAEhBb,OAAO,CAACc,YAFQ,EAGhB;IACEC,WAAW,EAAE,CAAE,UAAF,CADf;IAEEC,aAAa,EAAE,CAAC,eAAD,EAAkB,eAAlB,EAAkC,mBAAlC;EAFjB,CAHgB,CAAlB;AAQD;AAED,OAAO,eAAeC,cAAf,GAAgC;EACrC,OAAOlB,gBAAgB,CACrB,CAAC,MAAMS,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,GAAkCK,iBAAlC,EAAP,EAA8DC,KADzC,EAErB,CAFqB,CAAvB;AAID;AAED,OAAO,eAAeR,YAAf,GAA8B;EACnC,OAAOH,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAP;AACD;AAED,OAAO,SAASS,KAAT,GAAiB;EACtBZ,MAAM,CAACC,gBAAP,CAAwBY,aAAxB,CAAsCrB,OAAO,CAACc,YAA9C;AACD;AAED,OAAO,SAASQ,MAAT,GAAkB;EACvBd,MAAM,CAACC,gBAAP,CAAwBc,OAAxB;EACAf,MAAM,CAACgB,QAAP,CAAgBC,MAAhB;AACD"},"metadata":{},"sourceType":"module"}