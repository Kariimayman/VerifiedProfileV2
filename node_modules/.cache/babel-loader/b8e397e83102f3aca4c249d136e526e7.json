{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/verifiedprofilev2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/verifiedprofilev2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Contract,WalletConnection,connect,keyStores}from'near-api-js';import environment from'./config';import{formatNearAmount}from'near-api-js/lib/utils/format';var nearEnv=environment('testnet');export function initializeContract(){return _initializeContract.apply(this,arguments);}function _initializeContract(){_initializeContract=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var near;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return connect(Object.assign({deps:{keyStore:new keyStores.BrowserLocalStorageKeyStore()}},nearEnv));case 2:near=_context.sent;window.walletConnection=new WalletConnection(near);window.accountId=window.walletConnection.getAccountId();window.contract=new Contract(window.walletConnection.account(),nearEnv.contractName,{viewMethods:[\"getusers\",\"verificationPerUser\",\"getPendingUsers\"],changeMethods:[\"verifyAccount\",\"createProfile\",\"isAccountVerified\"]});case 6:case\"end\":return _context.stop();}}},_callee);}));return _initializeContract.apply(this,arguments);}export function accountBalance(){return _accountBalance.apply(this,arguments);}function _accountBalance(){_accountBalance=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=formatNearAmount;_context2.next=3;return window.walletConnection.account().getAccountBalance();case 3:_context2.t1=_context2.sent.total;return _context2.abrupt(\"return\",(0,_context2.t0)(_context2.t1,2));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _accountBalance.apply(this,arguments);}export function getAccountId(){return _getAccountId.apply(this,arguments);}function _getAccountId(){_getAccountId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",window.walletConnection.getAccountId());case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _getAccountId.apply(this,arguments);}export function login(){window.walletConnection.requestSignIn(nearEnv.contractName);}export function logout(){window.walletConnection.signOut();window.location.reload();}","map":{"version":3,"names":["Contract","WalletConnection","connect","keyStores","environment","formatNearAmount","nearEnv","initializeContract","Object","assign","deps","keyStore","BrowserLocalStorageKeyStore","near","window","walletConnection","accountId","getAccountId","contract","account","contractName","viewMethods","changeMethods","accountBalance","getAccountBalance","total","login","requestSignIn","logout","signOut","location","reload"],"sources":["D:/Projects/verifiedprofilev2/src/components/utils/near.js"],"sourcesContent":["import { Contract, WalletConnection, connect, keyStores } from 'near-api-js';\n\nimport environment from './config';\nimport { formatNearAmount } from 'near-api-js/lib/utils/format';\n\nconst nearEnv = environment('testnet');\n\nexport async function initializeContract() {\n  const near = await connect(\n    Object.assign(\n      { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } },\n      nearEnv\n    )\n  );\n  window.walletConnection = new WalletConnection(near);\n  window.accountId = window.walletConnection.getAccountId();\n  window.contract = new Contract(\n    window.walletConnection.account(),\n    nearEnv.contractName,\n    {\n      viewMethods: [ \"getusers\", \"verificationPerUser\",\"getPendingUsers\"],\n      changeMethods: [\"verifyAccount\", \"createProfile\",\"isAccountVerified\"],\n    }\n  );\n}\n\nexport async function accountBalance() {\n  return formatNearAmount(\n    (await window.walletConnection.account().getAccountBalance()).total,\n    2\n  );\n}\n\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\n\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}\n"],"mappings":"qSAAA,OAASA,QAAT,CAAmBC,gBAAnB,CAAqCC,OAArC,CAA8CC,SAA9C,KAA+D,aAA/D,CAEA,MAAOC,YAAP,KAAwB,UAAxB,CACA,OAASC,gBAAT,KAAiC,8BAAjC,CAEA,GAAMC,QAAO,CAAGF,WAAW,CAAC,SAAD,CAA3B,CAEA,eAAsBG,mBAAtB,qD,2GAAO,kKACcL,QAAO,CACxBM,MAAM,CAACC,MAAP,CACE,CAAEC,IAAI,CAAE,CAAEC,QAAQ,CAAE,GAAIR,UAAS,CAACS,2BAAd,EAAZ,CAAR,CADF,CAEEN,OAFF,CADwB,CADrB,QACCO,IADD,eAOLC,MAAM,CAACC,gBAAP,CAA0B,GAAId,iBAAJ,CAAqBY,IAArB,CAA1B,CACAC,MAAM,CAACE,SAAP,CAAmBF,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAnB,CACAH,MAAM,CAACI,QAAP,CAAkB,GAAIlB,SAAJ,CAChBc,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,EADgB,CAEhBb,OAAO,CAACc,YAFQ,CAGhB,CACEC,WAAW,CAAE,CAAE,UAAF,CAAc,qBAAd,CAAoC,iBAApC,CADf,CAEEC,aAAa,CAAE,CAAC,eAAD,CAAkB,eAAlB,CAAkC,mBAAlC,CAFjB,CAHgB,CAAlB,CATK,sD,qDAmBP,eAAsBC,eAAtB,iD,mGAAO,qJACElB,gBADF,wBAEIS,OAAM,CAACC,gBAAP,CAAwBI,OAAxB,GAAkCK,iBAAlC,EAFJ,oCAE2DC,KAF3D,gEAGH,CAHG,2D,iDAOP,eAAsBR,aAAtB,+C,+FAAO,yKACEH,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EADF,0D,+CAIP,MAAO,SAASS,MAAT,EAAiB,CACtBZ,MAAM,CAACC,gBAAP,CAAwBY,aAAxB,CAAsCrB,OAAO,CAACc,YAA9C,EACD,CAED,MAAO,SAASQ,OAAT,EAAkB,CACvBd,MAAM,CAACC,gBAAP,CAAwBc,OAAxB,GACAf,MAAM,CAACgB,QAAP,CAAgBC,MAAhB,GACD"},"metadata":{},"sourceType":"module"}