{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/verifiedprofilev2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/verifiedprofilev2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import environment from\"./config\";import{connect,Contract,keyStores,WalletConnection}from\"near-api-js\";import{formatNearAmount}from\"near-api-js/lib/utils/format\";var nearEnv=environment(\"testnet\");export function initializeContract(){return _initializeContract.apply(this,arguments);}function _initializeContract(){_initializeContract=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var near;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return connect(Object.assign({deps:{keyStore:new keyStores.BrowserLocalStorageKeyStore()}},nearEnv));case 2:near=_context.sent;window.walletConnection=new WalletConnection(near);window.accountId=window.walletConnection.getAccountId();window.contract=new Contract(window.walletConnection.account(),nearEnv.contractName,{viewMethods:[\"getusers\"],changeMethods:[\"verifyAccount\",\"createProfile\",\"isAccountVerified\"]});case 6:case\"end\":return _context.stop();}}},_callee);}));return _initializeContract.apply(this,arguments);}export function accountBalance(){return _accountBalance.apply(this,arguments);}function _accountBalance(){_accountBalance=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=formatNearAmount;_context2.next=3;return window.walletConnection.account().getAccountBalance();case 3:_context2.t1=_context2.sent.total;return _context2.abrupt(\"return\",(0,_context2.t0)(_context2.t1,1));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _accountBalance.apply(this,arguments);}export function login(){window.walletConnection.requestSignIn(nearEnv.contractName);}export function logout(){window.walletConnection.signOut();window.location.reload();}","map":{"version":3,"names":["environment","connect","Contract","keyStores","WalletConnection","formatNearAmount","nearEnv","initializeContract","Object","assign","deps","keyStore","BrowserLocalStorageKeyStore","near","window","walletConnection","accountId","getAccountId","contract","account","contractName","viewMethods","changeMethods","accountBalance","getAccountBalance","total","login","requestSignIn","logout","signOut","location","reload"],"sources":["D:/Projects/verifiedprofilev2/src/components/utils/near.js"],"sourcesContent":["import environment from \"./config\";\r\nimport { connect, Contract, keyStores, WalletConnection } from \"near-api-js\";\r\nimport { formatNearAmount } from \"near-api-js/lib/utils/format\";\r\n\r\nconst nearEnv = environment(\"testnet\");\r\nexport async function initializeContract() {\r\n    const near = await connect(\r\n      Object.assign(\r\n        { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } },\r\n        nearEnv\r\n      )\r\n    );\r\n    window.walletConnection = new WalletConnection(near);\r\n    window.accountId = window.walletConnection.getAccountId();\r\n    window.contract = new Contract(\r\n      window.walletConnection.account(),\r\n      nearEnv.contractName,\r\n      {\r\n        viewMethods: [ \"getusers\"],\r\n        changeMethods: [\"verifyAccount\", \"createProfile\",\"isAccountVerified\"],\r\n      }\r\n    );\r\n  }\r\n  export async function accountBalance() {\r\n  return formatNearAmount(\r\n    (await window.walletConnection.account().getAccountBalance()).total,1\r\n  );\r\n}\r\n\r\n\r\nexport function login() {\r\n  window.walletConnection.requestSignIn(nearEnv.contractName);\r\n}\r\n\r\nexport function logout() {\r\n  window.walletConnection.signOut();\r\n  window.location.reload();\r\n}"],"mappings":"qSAAA,MAAOA,YAAP,KAAwB,UAAxB,CACA,OAASC,OAAT,CAAkBC,QAAlB,CAA4BC,SAA5B,CAAuCC,gBAAvC,KAA+D,aAA/D,CACA,OAASC,gBAAT,KAAiC,8BAAjC,CAEA,GAAMC,QAAO,CAAGN,WAAW,CAAC,SAAD,CAA3B,CACA,eAAsBO,mBAAtB,qD,2GAAO,kKACgBN,QAAO,CACxBO,MAAM,CAACC,MAAP,CACE,CAAEC,IAAI,CAAE,CAAEC,QAAQ,CAAE,GAAIR,UAAS,CAACS,2BAAd,EAAZ,CAAR,CADF,CAEEN,OAFF,CADwB,CADvB,QACGO,IADH,eAOHC,MAAM,CAACC,gBAAP,CAA0B,GAAIX,iBAAJ,CAAqBS,IAArB,CAA1B,CACAC,MAAM,CAACE,SAAP,CAAmBF,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAnB,CACAH,MAAM,CAACI,QAAP,CAAkB,GAAIhB,SAAJ,CAChBY,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,EADgB,CAEhBb,OAAO,CAACc,YAFQ,CAGhB,CACEC,WAAW,CAAE,CAAE,UAAF,CADf,CAEEC,aAAa,CAAE,CAAC,eAAD,CAAkB,eAAlB,CAAkC,mBAAlC,CAFjB,CAHgB,CAAlB,CATG,sD,qDAkBL,eAAsBC,eAAtB,iD,mGAAO,qJACAlB,gBADA,wBAEES,OAAM,CAACC,gBAAP,CAAwBI,OAAxB,GAAkCK,iBAAlC,EAFF,oCAEyDC,KAFzD,gEAE+D,CAF/D,2D,iDAOT,MAAO,SAASC,MAAT,EAAiB,CACtBZ,MAAM,CAACC,gBAAP,CAAwBY,aAAxB,CAAsCrB,OAAO,CAACc,YAA9C,EACD,CAED,MAAO,SAASQ,OAAT,EAAkB,CACvBd,MAAM,CAACC,gBAAP,CAAwBc,OAAxB,GACAf,MAAM,CAACgB,QAAP,CAAgBC,MAAhB,GACD"},"metadata":{},"sourceType":"module"}